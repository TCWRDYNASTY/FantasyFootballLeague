<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TCWR FANTASY FOOTBALL DY-NASTY</title>

<style>
  * {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    padding: 1rem;
    font-family: 'Courier New', monospace;
    background-color: #1e3159;
    color: #f0f0f0;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .nav-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    padding: 20px;
    gap: 10px;
  }

  .nav-container a {
    color: white;
    font-size: 1rem;
    text-decoration: none;
    padding: 10px 15px;
    background-color: #2e4a80;
    border-left: 2px solid black;
    border-bottom: 2px solid black;
    text-align: center;
    transition: background-color 0.3s ease;
  }

  .nav-container a:hover {
    background-color: #3e5a99;
  }

  @media (max-width: 600px) {
    .nav-container a {
      font-size: 0.9rem;
      padding: 8px 12px;
    }
  }
.header {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: left;
  border: 2px solid black;
  background-color: beige;
  color: black;
  padding: 20px;
  gap: 20px;
  margin-bottom: 2rem; /* Adds space below */
}

.logo-container img {
  width: 100%;
  max-width: 250px;
  height: auto;
}

.header-text {
  display: flex;
  flex-direction: column;
}

.header-text p {
  margin: 5px 0;
}

.header .title {
  font-size: 45px;
  font-weight: bold;
}

.header .subtitle {
  font-size: 35px;
}

.header .since {
  font-size: 25px;
}

@media (max-width: 768px) {
  .header {
    flex-direction: column;
    text-align: center;
  }

  .logo-container img {
    max-width: 200px;
  }
}


  /* Layout */
  .container {
    display: flex;
    flex-wrap: wrap;
    width: 100%;
    max-width: 1300px;
    gap: 1rem;
  }

  .left-column, .right-column {
    background-color: #2a2a2a;
    border-radius: 10px;
    padding: 1rem;
  }

  .left-column {
    flex: 1 1 350px;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .right-column {
    flex: 1 1 600px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  @media (max-width: 768px) {
    .container {
      flex-direction: column;
      align-items: stretch;
    }

    .left-column, .right-column {
      width: 100%;
    }
  }

  /* Components */
  .sleeper-box {
    background-color: #fff;
    color: #000;
    border: 2px solid #333;
    padding: 1rem;
    border-radius: 8px;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.15);
  }

  .matchup {
    background-color: #f1f1f1;
    color: #333;
    padding: 0.5rem;
    margin-top: 1rem;
    border-radius: 5px;
  }

  .news-box {
    background-color: #1e1e1e;
    border: 1px solid #333;
    padding: 1rem;
    border-radius: 8px;
  }

  .news-box h2 {
    color: #ffcc00;
  }

  .news-box a {
    color: #1e90ff;
  }

  #chat-container {
    width: 100%;
    height: 400px;
    overflow-y: auto;
    border: 1px solid #ccc;
    background-color: #f0f0f0;
    color: #000;
    padding: 10px;
    border-radius: 8px;
    margin-bottom: 1rem;
  }

  .message {
    margin-bottom: 10px;
    padding: 8px;
    background-color: #dcdcdc;
    border-radius: 5px;
    cursor: pointer;
  }

  .timestamp {
    font-size: 0.8em;
    color: #555;
  }

  input, select, button {
    margin: 5px 0;
    padding: 8px;
    width: 100%;
    max-width: 500px;
    border-radius: 5px;
    border: none;
  }

  button {
    background-color: #4caf50;
    color: white;
    cursor: pointer;
  }

  button:hover {
    background-color: #45a049;
  }

  #signoff-button {
    margin: 0 auto;
    display: block;
  }
</style>

</head>

<body>

  <div class="nav-container">
    <a href="3Hall of Champions.html">Hall of Champions</a>
    <a href="4Flushables.html">Flushables</a>  
    <a href="7Records.html">Records</a>
    <a href="6Fallen Comrads.html">Fallen Comrades</a>
    <a href="underconstruction.html">Draft Lottery</a>  
    <a href="10game.html">NFL Guess Who!</a> 
    <a href="underconstruction.html">TWCR Memory</a> 
    <a href="8Bylaws.html">League Rules</a> 
    <a href="underconstruction.html">Contact Commish</a>
  </div>

  <div class="header">
    <div class="logo-container">
      <img src="DYNASTYLOGO.jpeg" alt="logo">
    </div>
    <div class="header-text">
      <p class="title">TCWR Dy-Nasty</p>
      <p class="subtitle">Fantasy Football League</p>
      <p class="since">Since 2023</p>
    </div>
  </div>

 <div class="container">
    <div class="left-column">
      <!-- Sleeper League Embed -->
      <div class="sleeper-box" id="league-profile" style="display: none;">
        <img id="league-avatar" class="avatar" src="" alt="League Avatar" />
        <div class="league-name" id="league-name"></div>
        <div class="league-details" id="league-details"></div>
      </div>
      <div id="matchups-container"></div>

      <!-- NFL News -->
      <div class="news-box">
        <h2>ðŸ“° Latest NFL News from ESPN</h2>
        <ul id="nfl-news">Loading...</ul>
      </div>
    </div>

    <!-- Chat App -->
    <div class="right-column">
      <div id="login-container">
        <select id="username-select">
          <option value="">Select User</option>
          <option value="Commish">Your Commish</option>
          <option value="Matt G">Matt G</option>
          <option value="User3">User 3</option>
          <option value="User4">User 4</option>
          <option value="User5">User 5</option>
          <option value="User6">User 6</option>
          <option value="User7">User 7</option>
          <option value="User8">User 8</option>
          <option value="User9">User 9</option>
          <option value="User10">User 10</option>
          <option value="User11">User 11</option>
          <option value="User12">User 12</option>
          <option value="User13">User 13</option>
          <option value="User14">User 14</option>
        </select>
        <input type="password" id="password-input" placeholder="Password">
        <button id="login-button">Login</button>
        <span id="error-message" style="color: red; display: none;">Incorrect username or password.</span>
      </div>

      <div id="chat-container"></div>

      <div style="text-align: center; width: 100%;">
        <input type="text" id="message-input" placeholder="Type your message..."><br>
        <button id="send-button">Send</button>
        <input type="file" id="file-input">
        <button id="emoji-button">ðŸ˜€</button>
        <div id="emoji-list" style="margin-top: 5px;"></div>
        <div style="margin-top: 10px;">
          <button id="signoff-button" style="display: none;">Sign Off</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts for Sleeper, NFL News, and Chat -->
  <script>
    // Sleeper League
    const leagueId = "1180908151502815232";
    const week = 1;

    fetch(`https://api.sleeper.app/v1/league/${leagueId}`)
      .then(res => res.json())
      .then(league => {
        document.getElementById("league-profile").style.display = "block";
        document.getElementById("league-avatar").src = league.avatar
          ? `https://sleepercdn.com/avatars/thumbs/${league.avatar}`
          : 'https://sleepercdn.com/images/v2/icons/avatar_default.png';
        document.getElementById("league-name").textContent = league.name || 'League Name Not Available';
        document.getElementById("league-details").innerHTML = `
          <p><strong>League ID:</strong> ${league.league_id}</p>
          <p><strong>Status:</strong> ${league.status}</p>
          <p><strong>Sport:</strong> ${league.sport}</p>
          <p><strong>Season:</strong> ${league.season}</p>
          <p><strong>Season Type:</strong> ${league.season_type}</p>
          <p><strong>Total Rosters:</strong> ${league.total_rosters}</p>
        `;
      });

    fetch(`https://api.sleeper.app/v1/league/${leagueId}/matchups/${week}`)
      .then(res => res.json())
      .then(matchups => {
        const container = document.getElementById("matchups-container");
        container.innerHTML = '';
        matchups.forEach(matchup => {
          const div = document.createElement("div");
          div.classList.add("matchup");
          div.innerHTML = `
            <h4>Matchup ID: ${matchup.matchup_id}</h4>
            <p><strong>Roster ID:</strong> ${matchup.roster_id}</p>
            <p><strong>Starters:</strong> ${matchup.starters.join(', ')}</p>
            <p><strong>Players:</strong> ${matchup.players.join(', ')}</p>
            <p><strong>Total Points:</strong> ${matchup.points}</p>
          `;
          container.appendChild(div);
        });
      });

    // NFL News
    const rssUrl = 'https://www.espn.com/espn/rss/nfl/news';
    const proxyUrl = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(rssUrl)}`;

    fetch(proxyUrl)
      .then(res => res.json())
      .then(data => {
        const list = document.getElementById('nfl-news');
        list.innerHTML = '';
        data.items.slice(0, 5).forEach(item => {
          const li = document.createElement('li');
          li.innerHTML = `<a href="${item.link}" target="_blank">${item.title}</a><br><small>${item.pubDate}</small>`;
          list.appendChild(li);
        });
      });

    // Chat App Logic
    const chatContainer = document.getElementById('chat-container');
    const messageInput = document.getElementById('message-input');
    const sendButton = document.getElementById('send-button');
    const usernameSelect = document.getElementById('username-select');
    const passwordInput = document.getElementById('password-input');
    const loginButton = document.getElementById('login-button');
    const loginContainer = document.getElementById('login-container');
    const signoffButton = document.getElementById('signoff-button');
    const fileInput = document.getElementById('file-input');
    const errorMessage = document.getElementById('error-message');

    let username = localStorage.getItem('username');
    let messages = JSON.parse(localStorage.getItem('messages')) || [];

    const userPasswords = {
      Commish: 'pass1',
      User2: 'Raja',
      User3: 'pass3',
      User4: 'pass4',
      User5: 'pass5',
      User6: 'pass6',
      User7: 'pass7',
      User8: 'pass8',
      User9: 'pass9',
      User10: 'pass10',
      User11: 'pass11',
      User12: 'pass12',
      User13: 'pass13',
      User14: 'pass14',
    };

    function displayMessages() {
      chatContainer.innerHTML = '';
      messages.forEach((msg, index) => {
        const div = document.createElement('div');
        div.className = 'message';
        const date = new Date(msg.timestamp);
        const formattedDate = date.toLocaleString(); // Format timestamp

        div.innerHTML = `${msg.text} <span class="timestamp">- ${msg.sender} at ${formattedDate}</span>`;
        
        // Message click handler for Edit/Delete options
        div.onclick = () => {
          if (msg.sender === username) {
            const action = prompt("Choose an action: \n1. Edit\n2. Delete");
            if (action === "1") {
              const newText = prompt("Edit your message:", msg.text);
              if (newText !== null) {
                msg.text = newText;
                localStorage.setItem('messages', JSON.stringify(messages));
                displayMessages();
              }
            } else if (action === "2") {
              if (confirm("Are you sure you want to delete this message?")) {
                messages.splice(index, 1);
                localStorage.setItem('messages', JSON.stringify(messages));
                displayMessages();
              }
            }
          }
        };

        chatContainer.appendChild(div);
      });
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    sendButton.onclick = () => {
      if (!username) return alert("Login first");
      const msg = {
        text: messageInput.value,
        sender: username,
        timestamp: new Date(), // Store the timestamp
        image: fileInput.files[0] ? URL.createObjectURL(fileInput.files[0]) : null
      };
      messages.push(msg);
      localStorage.setItem('messages', JSON.stringify(messages));
      displayMessages();
      messageInput.value = '';
      fileInput.value = '';
    };
messageInput.addEventListener('keydown', function(event) {
  if (event.key === 'Enter') {
    event.preventDefault();
    sendButton.click();
  }
});
    loginButton.onclick = () => {
      const user = usernameSelect.value;
      const pass = passwordInput.value;
      if (userPasswords[user] === pass) {
        username = user;
        localStorage.setItem('username', user);
        loginContainer.style.display = 'none';
        signoffButton.style.display = 'block';
        displayMessages();
      } else {
        errorMessage.style.display = 'block';
      }
    };

    signoffButton.onclick = () => {
      username = null;
      localStorage.removeItem('username');
      localStorage.removeItem('messages'); // Clear local storage when signing off
      loginContainer.style.display = 'block';
      signoffButton.style.display = 'none';
    };

    if (username) {
      loginContainer.style.display = 'none';
      signoffButton.style.display = 'block';
      displayMessages();
    }

    // Emoji Picker Logic
    const emojiButton = document.getElementById('emoji-button');
    const emojiList = document.getElementById('emoji-list');
    const emojis = 'ðŸ˜€ ðŸ˜… ðŸ˜‚ ðŸ˜Š ðŸ™ƒ ðŸ˜ ðŸ˜Ž ðŸ¤¯ ðŸ¥³ ðŸ‘‘ ðŸˆ ðŸš¨ ðŸš½ â¤ï¸'.split(' ');

    emojiButton.onclick = () => {
      emojiList.innerHTML = '';
      emojis.forEach(emoji => {
        const span = document.createElement('span');
        span.textContent = emoji;
        span.style.cursor = 'pointer';
        span.style.margin = '5px';
        span.style.fontSize = '20px';
        span.onclick = () => {
          messageInput.value += emoji;
          emojiList.innerHTML = '';
        };
        emojiList.appendChild(span);
      });
    };
  </script>
</body>
